$(window).bind("load",function(){if(require&&typeof require=="function"){require("rodate").uptime()}});(function(){var a={settings:{citylist:["mumbai","delhi","bangalore","hyderabad","kolkata","chennai","agartala","agra","ajmer","amaravati","ahmedabad","allahabad","amritsar","aurangabad","bareilly","bhopal","bhubaneswar","chandigarh","coimbatore","cuttack","dehradun","erode","faridabad","ghaziabad","goa","gurgaon","guwahati","hubballi","imphal","indore","itanagar","jaipur","jammu","jamshedpur","jodhpur","kanpur","kochi","kohima","kolhapur","kozhikode","lucknow","ludhiana","madurai","mangalore","meerut","mysore","nagpur","nashik","navi mumbai","noida","patna","puducherry","pune","raipur","rajkot","ranchi","srinagar","salem","shillong","shimla","surat","thane","trichy","thiruvananthapuram","udaipur","vadodara","varanasi","vijayawada","visakhapatnam"]},currentCityDataModel:{name:times.cookie.get("geolocation")||"Delhi"},init:function(){try{this.showLoader();
this.populateCitiesList();this.bindUIActions();this.setInitialCity()}catch(b){console.log("Error:-"+b)}},showLoader:function(){$("#fuelList").addClass("loading")},removeLoader:function(){$("#fuelList").removeClass("loading")},setInitialCity:function(){var b;if(wdt_Fuel.externalCity!==""&&wdt_Fuel.externalCity!==null){b=wdt_Fuel.externalCity}else{if(wdt_Fuel.subsec1=="-2128932452"&&wdt_Fuel.subsec2!==null&&wdt_Fuel.subsec2!==0&&wdt_Fuel.subsec2!==""){b=wdt_Fuel.subsecname2;if(b.toLowerCase()=="bengaluru"){b="bangalore"
}$("#fuel_wdt_header").hide()}else{b=times.cookie.get("geolocation")||"Delhi"}}a.setCityName(b);a.checkValidCity(b)},setCityName:function(b){if(typeof b!="undefined"&&b){$('[data-cityname="currentcity"]').text(b).show()}else{$('[data-cityname="currentcity"]').text("").hide()}},setButtonName:function(b){$("#changeCityBtn").text(b)},getCityFuelPrices:function(b){a.setButtonName(b);a.currentCityDataModel.name=b;var c=$.ajax({url:"https://toibnews.timesofindia.indiatimes.com/fuelprice/"+b.toLowerCase()+"-fuelprice",type:"GET",dataType:"json",cache:"true"}).done(function(d){if(d&&d.length>0){$("#fuelList").removeClass("loading");
$("#fuelList ul").show();$(".data-not-found").hide();$("#fuelList").show();$("#dieselprice").text(d[0]["Diesel"]);$("#petrolprice").text(d[0]["Petrol"]);$("[data-date]").text(d[0]["date"])}else{$("#fuelList").removeClass("loading");a.showNodataFound(b)}}).fail(function(){}).always(function(){})},checkValidCity:function(b){if(typeof b!="undefined"&&b){var d=false;for(var c=a.settings.citylist.length-1;c>=0;c--){if(a.settings.citylist[c].replace(/[^\w\s]/gi,"").toLowerCase()==b.replace(/[^\w\s]/gi,"").toLowerCase()){d=true;
break}}if(d){a.getCityFuelPrices(b);$("#fuel_wdt_container").show()}else{a.showNodataFound(b)}}else{a.showNodataFound(b);$("#fuel_wdt_container").show()}},showNodataFound:function(b){if(typeof b!="undefined"&&b){$("#fuelList ul").hide();$(".data-not-found").find("span").text(b);$(".data-not-found").show()}else{}},populateCitiesList:function(){if($("#modal-citylist")){a.settings.modalPopup=$("#modal-citylist");a.settings.modalBody=$("#modal-citylist").find(".modal-body")}var f=document.createElement("ul"),b,c,h,d,e=1,g,j;
f.setAttribute("class","city_list");for(var e=0;e<a.settings.citylist.length;e++){h=document.createElement("input");h.setAttribute("type","radio");h.setAttribute("name","city_name");h.setAttribute("id","city"+e);g=document.createElement("SPAN");j=document.createTextNode(a.settings.citylist[e]);g.appendChild(j);d=document.createElement("LABEL");d.setAttribute("for","city"+e);d.appendChild(g);b=document.createElement("li");b.setAttribute("class","radio_btn");b.appendChild(h);b.appendChild(d);f.appendChild(b)
}this.settings.modalBody.children().append('<div id=nocityDiv style="display: none;">No city found</div>');this.settings.modalBody.children().append(f);this.settings.modalBody.attr("cities-populated",true)},fireGAEvent:function(b){if(window.ga){ga("send","event","Business_Section","Fuel_Price_"+b,"https://timesofindia.indiatimes.com/business",{nonInteraction:1})}return true},bindUIActions:function(){$(document).bind("keydown",function(b){if(b.which==27){a.closeModal()}});$("#changeCityBtn").on("click",function(){a.openModal()
});$(".close").on("click",function(){a.closeModal()});$('[data-plugin="select-city"]').on("click",function(){var b=a.settings.modalBody.find("input[type='radio']:checked").next().text();$("#fuelList").addClass("loading");a.setCityName(b);a.getCityFuelPrices(b);a.fireGAEvent(b)});$("#filterCities").on("input",function(){var b=$(this).val().toLowerCase();$(".city_list li").each(function(){var c=$(this).text().toLowerCase(),d=c.indexOf(b)!==-1;$(this).toggle(d)});if($('.city_list li[style="display: none;"]').length==$(".city_list li").length){$("#nocityDiv").show();
$('[data-plugin="select-city"]').addClass("disabled")}else{$("#nocityDiv").hide();$('[data-plugin="select-city"]').removeClass("disabled")}})},openModal:function(){$("body").css({overflow:"hidden"});$('input[name="city_name"]').prop("checked",false);a.settings.modalPopup.show()},closeModal:function(){$("body").css({overflow:"scroll"});a.settings.modalPopup.hide()}};if(typeof _geo!="undefined"&&_geo=="1"){a.init()}else{$(".fuel_price_wdt").remove()}})();(function MostPopularWidget(){var f=$(".most-popular-wrapper"),h=f.find(".tab-content"),b=f.find("[data-type].active").data("type"),e=f.find("[data-scope].active").data("scope"),g="section",l=window.mpsectionid,j="/wdt_mp.cms?v=1&ajaxreq=1&pg=1",a=null;
function d(){f.on("click",'[data-type]:not(".active")',function(){b=$(this).data("type");e=g;k()});f.on("click",'[data-scope]:not(".active")',function(){e=$(this).data("scope");k()})}function c(){$("[data-type]").removeClass("active");$("[data-scope]").removeClass("active");$('[data-type="'+b+'"]').addClass("active");$('[data-scope="'+e+'"]').addClass("active")}function k(){c();if(a){a.abort()}var n=(e==g)?l:"-2128958273";var m=j+"&msid="+n+"&type="+b+"&scope="+e;h.addClass("loading");a=$.get(m,function(o){h.html(o).removeClass("loading")
})}d()})();require(["tiljs/load"],function(a){a.js("/tinyscrollbar/version-2,minify-1.cms",setCustomScrollBar);a.css("/tinyscrollbar_css/version-9,minify-1.cms")});$("iframe.csscmnpolltmplifrm").on("load",function(){});function setCustomScrollBar(){$(".latestnews-container").mCustomScrollbar({theme:"dark",scrollButtons:{enable:false},mouseWheel:{enable:true,scrollAmount:52},callbacks:{onScroll:function(){$(this).find("img[data-src]").each(function(){$(this).attr("src",$(this).attr("data-src"));$(this).removeAttr("data-src")
})}}})}$(".latestnews-wdgt").on("click",".jPlayVideo",loadVideo);function submitPollForm(c){glblfname=c;try{var b=0;for(i=0;i<document.forms[c].PRadio.length;i++){if(document.forms[c].PRadio[i].checked==1){b=1}}if(b==0){alert("Please select an Option to participate in the poll");return false}document.forms[c].submit();document.getElementById(c+"frame").style.display="block";document.getElementById(c).style.display="none"}catch(a){}}function loadVideo(f){var b=$(f.target);var d=b.data("msid");var a=b.data("pos");
var h=localStorage.getItem("autoplay_userInitiated")=="on";var g=h?"on":"off";var c="/videodash.cms?msid="+d+"&channel=10001&videosection=videoshow&tadsid=38883&kalstream=PROGRESSIVE&hpauto=1&stxt="+g;var e='<iframe class="videoplayer loading" src='+c+' mozallowfullscreen="true" webkitallowfullscreen="true" allowfullscreen="true"></iframe>';b.closest(".chdimg").html(e)}(function(){var a={};a.Set_Ckie=function(d,f,b,j,e,h){var c=new Date();c.setTime(c.getTime());if(b){b=b*1000*60}var g=new Date(c.getTime()+(b));
document.cookie=d+"="+escape(f)+((b)?";expires="+g.toGMTString():"")+((j)?";path="+j:"")+((e)?";domain="+e:"")+((h)?";secure":"")};a.Get_Ckie=function(d){var e=document.cookie.indexOf(d+"=");var b=e+d.length+1;if((!e)&&(d!=document.cookie.substring(0,d.length))){return null}if(e==-1){return null}var c=document.cookie.indexOf(";",b);if(c==-1){c=document.cookie.length}return unescape(document.cookie.substring(b,c))};a.Delete_Ckie=function(b,e,d){try{if(a.Get_Ckie(b)){document.cookie=b+"="+((e)?";path="+e:"")+((d)?";domain="+d:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"
}}catch(c){}};$(function(){if(!$('.slideshow1 [data-gallery="slider"] ul li').length){$(".slideshow1").hide()}});$(window).bind("load",function(){if(require&&typeof require=="function"){require("rodate").uptime()}$("a").click(function(){if($(this).attr("hid")){var c=$(this).attr("hid");a.Set_Ckie("PlRef",c,5,"/",".indiatimes.com","")}else{var b=a.Get_Ckie("PlRef");if(b!=null||b!=undefined){a.Delete_Ckie("PlRef","/",".indiatimes.com")}}})})})();